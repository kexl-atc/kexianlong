# å°è´¦ç®¡ç†ç³»ç»Ÿ - å¿«é€Ÿå‚è€ƒæŒ‡å—

## ğŸš€ å¿«é€Ÿå¼€å§‹ï¼ˆ5åˆ†é’Ÿï¼‰

### 1. ä¸‹è½½é¡¹ç›®
```bash
# ä¸‹è½½é¡¹ç›®æ–‡ä»¶åˆ°æœ¬åœ°
# è§£å‹åˆ° ledger-management-system ç›®å½•
```

### 2. ä¸€é”®å®‰è£…
**Windows:**
```batch
cd ledger-management-system
install.bat
```

**Linux/Mac:**
```bash
cd ledger-management-system
chmod +x install.sh
./install.sh
```

### 3. é…ç½®å¯†é’¥
ç¼–è¾‘ `backend/.env` æ–‡ä»¶ï¼š
```env
SECRET_KEY=your-very-long-random-string-here
JWT_SECRET_KEY=another-very-long-random-string
ADMIN_PASSWORD=your-secure-admin-password
```

### 4. å¯åŠ¨ç³»ç»Ÿ
**Windows:**
```batch
start.bat
```

**Linux/Mac:**
```bash
./start.sh
```

### 5. è®¿é—®ç³»ç»Ÿ
- æ‰“å¼€æµè§ˆå™¨è®¿é—®ï¼šhttp://localhost:8080
- é»˜è®¤è´¦å·ï¼šadmin / change_this_password

## ğŸ“ æ ¸å¿ƒæ–‡ä»¶è¯´æ˜

### å¿…é¡»ä¿®æ”¹çš„æ–‡ä»¶
1. `backend/.env` - ç¯å¢ƒé…ç½®ï¼ˆå¯†é’¥ã€å¯†ç ï¼‰
2. `frontend/.env.production` - ç”Ÿäº§ç¯å¢ƒAPIåœ°å€

### é‡è¦é…ç½®æ–‡ä»¶
- `backend/app/config.py` - åç«¯é…ç½®
- `frontend/vue.config.js` - å‰ç«¯æ„å»ºé…ç½®
- `backend/requirements.txt` - Pythonä¾èµ–
- `frontend/package.json` - Node.jsä¾èµ–

### æ•°æ®åº“æ–‡ä»¶
- `backend/ledger.db` - SQLiteæ•°æ®åº“ï¼ˆè‡ªåŠ¨åˆ›å»ºï¼‰
- `backend/backups/` - æ•°æ®åº“å¤‡ä»½ç›®å½•

## ğŸ”‘ é»˜è®¤è§’è‰²æƒé™

| è§’è‰² | æŸ¥çœ‹è‡ªå·±æ•°æ® | æŸ¥çœ‹æ‰€æœ‰æ•°æ® | ç¼–è¾‘/åˆ é™¤è‡ªå·±æ•°æ® | ç¼–è¾‘/åˆ é™¤æ‰€æœ‰æ•°æ® | ç³»ç»Ÿç®¡ç† |
|------|------------|------------|----------------|----------------|---------|
| æ™®é€šç”¨æˆ· | âœ“ | âœ— | âœ“ | âœ— | âœ— |
| é«˜çº§ç”¨æˆ· | âœ“ | âœ“ | âœ“ | âœ“ | âœ— |
| ç®¡ç†å‘˜ | âœ“ | âœ“ | âœ“ | âœ“ | âœ“ |

## ğŸ“ å¸¸ç”¨å‘½ä»¤

### åç«¯å‘½ä»¤
```bash
# åˆ›å»ºç”¨æˆ·
flask create-user username password --role admin

# åˆå§‹åŒ–æ•°æ®åº“
flask init-db

# é‡ç½®æ•°æ®åº“ï¼ˆå±é™©ï¼‰
flask reset-db

# å¡«å……æµ‹è¯•æ•°æ®
flask seed-data
```

### æ•°æ®åº“å¤‡ä»½
```bash
# Windows
cd backend/scripts
backup.bat

# Linux/Mac
cd backend/scripts
./backup.sh
```

### å¥åº·æ£€æŸ¥
```bash
cd backend/scripts
python health_check.py
```

## ğŸ”§ å¸¸è§é—®é¢˜å¿«é€Ÿè§£å†³

### 1. ç«¯å£è¢«å ç”¨
**é—®é¢˜**ï¼š`Error: Port 5000/8080 is already in use`

**è§£å†³**ï¼š
```bash
# Windows - æŸ¥æ‰¾å¹¶ç»“æŸè¿›ç¨‹
netstat -ano | findstr :5000
taskkill /PID <è¿›ç¨‹ID> /F

# Linux/Mac
lsof -i :5000
kill -9 <è¿›ç¨‹ID>
```

### 2. ä¾èµ–å®‰è£…å¤±è´¥
**é—®é¢˜**ï¼š`pip install` æˆ– `npm install` å¤±è´¥

**è§£å†³**ï¼š
```bash
# ä½¿ç”¨å›½å†…é•œåƒ
# Python
pip install -r requirements.txt -i https://pypi.tuna.tsinghua.edu.cn/simple

# Node.js
npm install --registry https://registry.npm.taobao.org
```

### 3. æ•°æ®åº“é”å®š
**é—®é¢˜**ï¼š`database is locked`

**è§£å†³**ï¼š
1. å…³é—­æ‰€æœ‰è®¿é—®æ•°æ®åº“çš„ç¨‹åº
2. åˆ é™¤ä¸´æ—¶æ–‡ä»¶ï¼š`rm backend/ledger.db-journal`
3. é‡å¯åç«¯æœåŠ¡

### 4. ç™»å½•ä¸€ç›´å¤±è´¥
**é—®é¢˜**ï¼šç”¨æˆ·åå¯†ç æ­£ç¡®ä½†æ— æ³•ç™»å½•

**æ£€æŸ¥æ­¥éª¤**ï¼š
1. ç¡®è®¤åç«¯æœåŠ¡æ­£åœ¨è¿è¡Œ
2. æ£€æŸ¥æµè§ˆå™¨æ§åˆ¶å°ç½‘ç»œè¯·æ±‚
3. æŸ¥çœ‹åç«¯æ—¥å¿—ï¼š`backend/logs/app.log`
4. ç¡®è®¤JWTå¯†é’¥å·²é…ç½®

## ğŸ“Š APIå¿«é€Ÿæµ‹è¯•

ä½¿ç”¨curlæµ‹è¯•APIï¼š

```bash
# ç™»å½•è·å–Token
curl -X POST http://localhost:5000/api/login \
  -H "Content-Type: application/json" \
  -d '{"username":"admin","password":"admin123"}'

# ä½¿ç”¨Tokenè®¿é—®API
TOKEN="your-token-here"
curl -H "Authorization: Bearer $TOKEN" \
  http://localhost:5000/api/ledger
```

## ğŸš¢ ç”Ÿäº§éƒ¨ç½²æ¸…å•

- [ ] ä¿®æ”¹æ‰€æœ‰é»˜è®¤å¯†é’¥å’Œå¯†ç 
- [ ] é…ç½®HTTPSè¯ä¹¦
- [ ] è®¾ç½®é˜²ç«å¢™è§„åˆ™
- [ ] é…ç½®è‡ªåŠ¨å¤‡ä»½
- [ ] è®¾ç½®æ—¥å¿—è½®è½¬
- [ ] é…ç½®ç›‘æ§å‘Šè­¦
- [ ] å‹åŠ›æµ‹è¯•
- [ ] åˆ¶å®šåº”æ€¥é¢„æ¡ˆ

## ğŸ“ è·å–å¸®åŠ©

1. **æŸ¥çœ‹æ—¥å¿—**
   - åç«¯æ—¥å¿—ï¼š`backend/logs/app.log`
   - å¥åº·æ£€æŸ¥æ—¥å¿—ï¼š`backend/logs/health_check.log`

2. **è°ƒè¯•æ¨¡å¼**
   - åç«¯ï¼š`FLASK_DEBUG=True`
   - å‰ç«¯ï¼šæµè§ˆå™¨å¼€å‘è€…å·¥å…·ï¼ˆF12ï¼‰

3. **æ€§èƒ½åˆ†æ**
   ```bash
   cd backend/scripts
   python performance_monitor.py
   ```

## ğŸ¯ ä¸‹ä¸€æ­¥

1. **åŸºç¡€ä½¿ç”¨**
   - åˆ›å»ºç¬¬ä¸€ä¸ªå°è´¦è®°å½•
   - å°è¯•æœç´¢å’Œç­›é€‰åŠŸèƒ½
   - å¯¼å‡ºæ•°æ®æµ‹è¯•

2. **è¿›é˜¶é…ç½®**
   - ä¿®æ”¹çœä»½åˆ—è¡¨
   - è‡ªå®šä¹‰æ€§è´¨é€‰é¡¹
   - é…ç½®é‚®ä»¶é€šçŸ¥

3. **ç³»ç»Ÿæ‰©å±•**
   - æ·»åŠ æ–°çš„APIæ¥å£
   - è‡ªå®šä¹‰å‰ç«¯ç»„ä»¶
   - é›†æˆç¬¬ä¸‰æ–¹æœåŠ¡

---

ğŸ’¡ **æç¤º**ï¼šé‡åˆ°é—®é¢˜æ—¶ï¼Œå…ˆæŸ¥çœ‹ç›¸å…³æ—¥å¿—æ–‡ä»¶ï¼Œå¤§éƒ¨åˆ†é—®é¢˜éƒ½èƒ½ä»æ—¥å¿—ä¸­æ‰¾åˆ°åŸå› ã€‚

ğŸ“Œ **è®°ä½**ï¼šç”Ÿäº§ç¯å¢ƒéƒ¨ç½²å‰ï¼Œä¸€å®šè¦ä¿®æ”¹æ‰€æœ‰é»˜è®¤é…ç½®ï¼

# å°è´¦ç®¡ç†ç³»ç»Ÿéƒ¨ç½²å’Œä½¿ç”¨è¯´æ˜

## é¡¹ç›®æ¦‚è¿°

è¿™æ˜¯ä¸€ä¸ªåŸºäº Flask (åç«¯) å’Œ Vue.js 3 (å‰ç«¯) çš„å°è´¦ç®¡ç†ç³»ç»Ÿï¼Œå…·æœ‰ä»¥ä¸‹ä¸»è¦åŠŸèƒ½ï¼š

- ç”¨æˆ·è®¤è¯å’Œè§’è‰²ç®¡ç†ï¼ˆç®¡ç†å‘˜ã€é«˜çº§ç”¨æˆ·ã€æ™®é€šç”¨æˆ·ï¼‰
- å°è´¦çš„å¢åˆ æ”¹æŸ¥åŠŸèƒ½
- åŸºäºè§’è‰²çš„æƒé™æ§åˆ¶
- ç³»ç»Ÿæ—¥å¿—è®°å½•å’ŒæŸ¥çœ‹
- æ•°æ®å¯¼å‡ºåŠŸèƒ½

## æ–‡ä»¶ç»“æ„

é¡¹ç›®åŒ…å«ä»¥ä¸‹æ–‡ä»¶æ•°é‡ï¼š

### åç«¯æ–‡ä»¶ (17ä¸ªæ–‡ä»¶)
```
backend/
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ __init__.py          # åº”ç”¨åˆå§‹åŒ–
â”‚   â”œâ”€â”€ models.py            # æ•°æ®æ¨¡å‹
â”‚   â”œâ”€â”€ auth.py              # è®¤è¯æ¨¡å—
â”‚   â”œâ”€â”€ config.py            # é…ç½®æ–‡ä»¶
â”‚   â”œâ”€â”€ api/
â”‚   â”‚   â”œâ”€â”€ __init__.py      # APIåŒ…åˆå§‹åŒ–
â”‚   â”‚   â”œâ”€â”€ ledger.py        # å°è´¦API
â”‚   â”‚   â”œâ”€â”€ admin.py         # ç®¡ç†å‘˜API
â”‚   â”‚   â””â”€â”€ meta.py          # å…ƒæ•°æ®API
â”‚   â””â”€â”€ utils/
â”‚       â”œâ”€â”€ __init__.py      # å·¥å…·åŒ…åˆå§‹åŒ–
â”‚       â””â”€â”€ decorators.py    # è£…é¥°å™¨å·¥å…·
â”œâ”€â”€ requirements.txt         # Pythonä¾èµ–
â”œâ”€â”€ run.py                   # è¿è¡Œè„šæœ¬
â”œâ”€â”€ wsgi.py                  # WSGIå…¥å£
â”œâ”€â”€ .env.example             # ç¯å¢ƒå˜é‡ç¤ºä¾‹
â””â”€â”€ logs/                    # æ—¥å¿—ç›®å½•ï¼ˆè‡ªåŠ¨åˆ›å»ºï¼‰
```

### å‰ç«¯æ–‡ä»¶ (23ä¸ªæ–‡ä»¶)
```
frontend/
â”œâ”€â”€ public/
â”‚   â””â”€â”€ index.html           # HTMLæ¨¡æ¿
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ api/
â”‚   â”‚   â”œâ”€â”€ auth.js          # è®¤è¯API
â”‚   â”‚   â”œâ”€â”€ ledger.js        # å°è´¦API
â”‚   â”‚   â””â”€â”€ admin.js         # ç®¡ç†å‘˜API
â”‚   â”œâ”€â”€ router/
â”‚   â”‚   â””â”€â”€ index.js         # è·¯ç”±é…ç½®
â”‚   â”œâ”€â”€ store/
â”‚   â”‚   â””â”€â”€ user.js          # ç”¨æˆ·çŠ¶æ€ç®¡ç†
â”‚   â”œâ”€â”€ utils/
â”‚   â”‚   â””â”€â”€ request.js       # è¯·æ±‚å·¥å…·
â”‚   â”œâ”€â”€ views/
â”‚   â”‚   â”œâ”€â”€ LoginPage.vue    # ç™»å½•é¡µé¢
â”‚   â”‚   â”œâ”€â”€ LedgerList.vue   # å°è´¦åˆ—è¡¨
â”‚   â”‚   â”œâ”€â”€ LedgerForm.vue   # å°è´¦è¡¨å•
â”‚   â”‚   â”œâ”€â”€ AdminLogView.vue # ç®¡ç†å‘˜æ—¥å¿—
â”‚   â”‚   â””â”€â”€ NotFound.vue     # 404é¡µé¢
â”‚   â”œâ”€â”€ App.vue              # ä¸»ç»„ä»¶
â”‚   â””â”€â”€ main.js              # å…¥å£æ–‡ä»¶
â”œâ”€â”€ .env.development         # å¼€å‘ç¯å¢ƒé…ç½®
â”œâ”€â”€ .env.production          # ç”Ÿäº§ç¯å¢ƒé…ç½®
â”œâ”€â”€ package.json             # ä¾èµ–é…ç½®
â””â”€â”€ vue.config.js            # Vueé…ç½®
```

æ€»è®¡ï¼š40ä¸ªæ–‡ä»¶

## æœ¬åœ°å¼€å‘ç¯å¢ƒè®¾ç½®

### å‰ç½®è¦æ±‚

1. **Python 3.6+**
   - ä¸‹è½½åœ°å€: https://www.python.org/downloads/
   - å®‰è£…æ—¶å‹¾é€‰ "Add Python to PATH"

2. **Node.js 14+**
   - ä¸‹è½½åœ°å€: https://nodejs.org/
   - æ¨èå®‰è£… LTS ç‰ˆæœ¬

### åç«¯è®¾ç½®

1. **è¿›å…¥åç«¯ç›®å½•**
   ```bash
   cd backend
   ```

2. **åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ**
   ```bash
   # Windows
   python -m venv venv
   .\venv\Scripts\activate

   # Mac/Linux
   python3 -m venv venv
   source venv/bin/activate
   ```

3. **å®‰è£…ä¾èµ–**
   ```bash
   pip install -r requirements.txt
   ```

4. **é…ç½®ç¯å¢ƒå˜é‡**
   ```bash
   # å¤åˆ¶ç¯å¢ƒå˜é‡ç¤ºä¾‹æ–‡ä»¶
   cp .env.example .env
   
   # ç¼–è¾‘ .env æ–‡ä»¶ï¼Œä¿®æ”¹ä»¥ä¸‹é…ç½®ï¼š
   # SECRET_KEY=your-secret-key
   # JWT_SECRET_KEY=your-jwt-secret-key
   # ADMIN_PASSWORD=your-admin-password
   ```

5. **åˆå§‹åŒ–æ•°æ®åº“**
   ```bash
   # åˆ›å»ºæ•°æ®åº“è¡¨
   flask init-db
   
   # åˆ›å»ºç®¡ç†å‘˜ç”¨æˆ·ï¼ˆå¯é€‰ï¼Œé»˜è®¤ä¼šè‡ªåŠ¨åˆ›å»ºadmin/admin123ï¼‰
   flask create-user admin newpassword --role admin
   ```

6. **è¿è¡Œåç«¯æœåŠ¡**
   ```bash
   # å¼€å‘æ¨¡å¼
   python run.py
   
   # æˆ–ä½¿ç”¨ Flask å‘½ä»¤
   flask run --debug --port 5000
   ```

   åç«¯å°†åœ¨ http://localhost:5000 è¿è¡Œ

### å‰ç«¯è®¾ç½®

1. **è¿›å…¥å‰ç«¯ç›®å½•**
   ```bash
   cd frontend
   ```

2. **å®‰è£…ä¾èµ–**
   ```bash
   npm install
   # æˆ–ä½¿ç”¨ yarn
   yarn install
   ```

3. **è¿è¡Œå¼€å‘æœåŠ¡å™¨**
   ```bash
   npm run serve
   # æˆ–ä½¿ç”¨ yarn
   yarn run serve
   ```

   å‰ç«¯å°†åœ¨ http://localhost:8080 è¿è¡Œ

### é»˜è®¤è´¦å·

- ç®¡ç†å‘˜è´¦å·ï¼šadmin / admin123ï¼ˆé¦–æ¬¡ç™»å½•è¯·ä¿®æ”¹å¯†ç ï¼‰

## ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²

### åç«¯éƒ¨ç½²ï¼ˆä½¿ç”¨Gunicornï¼‰

1. **å®‰è£…é¢å¤–ä¾èµ–**
   ```bash
   pip install gunicorn
   ```

2. **è®¾ç½®ç”Ÿäº§ç¯å¢ƒå˜é‡**
   ```bash
   export FLASK_ENV=production
   export SECRET_KEY=your-production-secret-key
   export JWT_SECRET_KEY=your-production-jwt-key
   ```

3. **è¿è¡ŒGunicorn**
   ```bash
   gunicorn -w 4 -b 0.0.0.0:5000 wsgi:application
   ```

### å‰ç«¯éƒ¨ç½²

1. **ä¿®æ”¹ç”Ÿäº§ç¯å¢ƒé…ç½®**
   ç¼–è¾‘ `.env.production` æ–‡ä»¶ï¼š
   ```
   VUE_APP_API_BASE_URL=http://your-server-domain.com/api
   ```

2. **æ„å»ºç”Ÿäº§ç‰ˆæœ¬**
   ```bash
   npm run build
   # æˆ–ä½¿ç”¨ yarn
   yarn build
   ```

3. **éƒ¨ç½²distç›®å½•**
   å°† `dist` ç›®å½•ä¸­çš„æ–‡ä»¶éƒ¨ç½²åˆ°WebæœåŠ¡å™¨ï¼ˆå¦‚Nginxï¼‰

### Nginxé…ç½®ç¤ºä¾‹

```nginx
server {
    listen 80;
    server_name your-domain.com;

    # å‰ç«¯é™æ€æ–‡ä»¶
    location / {
        root /path/to/frontend/dist;
        try_files $uri $uri/ /index.html;
    }

    # åç«¯APIä»£ç†
    location /api {
        proxy_pass http://localhost:5000;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    }
}
```

### ä½¿ç”¨Dockeréƒ¨ç½²

1. **åç«¯Dockerfile**
   ```dockerfile
   FROM python:3.9-slim
   WORKDIR /app
   COPY requirements.txt .
   RUN pip install --no-cache-dir -r requirements.txt
   COPY . .
   CMD ["gunicorn", "-w", "4", "-b", "0.0.0.0:5000", "wsgi:application"]
   ```

2. **å‰ç«¯Dockerfile**
   ```dockerfile
   FROM node:14 AS builder
   WORKDIR /app
   COPY package*.json ./
   RUN npm install
   COPY . .
   RUN npm run build

   FROM nginx:alpine
   COPY --from=builder /app/dist /usr/share/nginx/html
   COPY nginx.conf /etc/nginx/conf.d/default.conf
   ```

3. **docker-compose.yml**
   ```yaml
   version: '3'
   services:
     backend:
       build: ./backend
       ports:
         - "5000:5000"
       environment:
         - FLASK_ENV=production
         - SECRET_KEY=${SECRET_KEY}
         - JWT_SECRET_KEY=${JWT_SECRET_KEY}
       volumes:
         - ./backend/logs:/app/logs

     frontend:
       build: ./frontend
       ports:
         - "80:80"
       depends_on:
         - backend
   ```

## ç³»ç»Ÿä½¿ç”¨è¯´æ˜

### ç™»å½•ç³»ç»Ÿ

1. è®¿é—®ç³»ç»Ÿé¦–é¡µï¼Œè‡ªåŠ¨è·³è½¬åˆ°ç™»å½•é¡µ
2. è¾“å…¥ç”¨æˆ·åå’Œå¯†ç ç™»å½•
3. æ–°ç”¨æˆ·å¯ç‚¹å‡»"æ³¨å†Œæ–°è´¦å·"è¿›è¡Œæ³¨å†Œ

### å°è´¦ç®¡ç†

1. **æŸ¥çœ‹å°è´¦åˆ—è¡¨**
   - ç™»å½•åè‡ªåŠ¨è¿›å…¥å°è´¦åˆ—è¡¨é¡µ
   - å¯é€šè¿‡æœç´¢æ¡†ã€çœä»½ç­›é€‰ã€æ—¥æœŸèŒƒå›´ç­›é€‰æ•°æ®
   - ç‚¹å‡»è¡¨å¤´å¯æ’åº

2. **æ–°å¢å°è´¦**
   - ç‚¹å‡»"æ–°å¢å°è´¦"æŒ‰é’®
   - å¡«å†™å¿…å¡«é¡¹ï¼ˆæ ‡*å·çš„å­—æ®µï¼‰
   - é¡¹ç›®åç§°æ”¯æŒè¾“å…¥è”æƒ³
   - ç‚¹å‡»"æäº¤"ä¿å­˜

3. **ç¼–è¾‘å°è´¦**
   - åœ¨åˆ—è¡¨ä¸­ç‚¹å‡»"ç¼–è¾‘"æŒ‰é’®
   - ä¿®æ”¹éœ€è¦çš„å­—æ®µ
   - ç‚¹å‡»"ä¿å­˜ä¿®æ”¹"

4. **åˆ é™¤å°è´¦**
   - åœ¨åˆ—è¡¨ä¸­ç‚¹å‡»"åˆ é™¤"æŒ‰é’®
   - ç¡®è®¤åˆ é™¤æ“ä½œ

5. **å¯¼å‡ºæ•°æ®**
   - ç‚¹å‡»"å¯¼å‡ºæ•°æ®"æŒ‰é’®
   - è‡ªåŠ¨ä¸‹è½½CSVæ ¼å¼æ–‡ä»¶

### ç³»ç»Ÿç®¡ç†ï¼ˆä»…ç®¡ç†å‘˜ï¼‰

1. **æŸ¥çœ‹ç³»ç»Ÿæ—¥å¿—**
   - ç‚¹å‡»ç”¨æˆ·ä¸‹æ‹‰èœå•ä¸­çš„"ç³»ç»Ÿç®¡ç†"
   - å¯æŒ‰çº§åˆ«ã€ç”¨æˆ·ã€æ—¶é—´èŒƒå›´ç­›é€‰æ—¥å¿—

2. **æŸ¥çœ‹ç³»ç»Ÿç»Ÿè®¡**
   - åœ¨ç³»ç»Ÿæ—¥å¿—é¡µç‚¹å‡»"ç³»ç»Ÿç»Ÿè®¡"
   - æŸ¥çœ‹ç”¨æˆ·ç»Ÿè®¡å’Œå°è´¦ç»Ÿè®¡ä¿¡æ¯

### ä¿®æ”¹å¯†ç 

1. ç‚¹å‡»ç”¨æˆ·ä¸‹æ‹‰èœå•ä¸­çš„"ä¿®æ”¹å¯†ç "
2. è¾“å…¥åŸå¯†ç å’Œæ–°å¯†ç 
3. ç¡®è®¤åé‡æ–°ç™»å½•

## å¸¸è§é—®é¢˜

### 1. åç«¯å¯åŠ¨å¤±è´¥
- æ£€æŸ¥Pythonç‰ˆæœ¬æ˜¯å¦ç¬¦åˆè¦æ±‚
- ç¡®ä¿è™šæ‹Ÿç¯å¢ƒå·²æ¿€æ´»
- æ£€æŸ¥ä¾èµ–æ˜¯å¦å®Œå…¨å®‰è£…
- æŸ¥çœ‹logsç›®å½•ä¸‹çš„æ—¥å¿—æ–‡ä»¶

### 2. å‰ç«¯æ— æ³•è¿æ¥åç«¯
- æ£€æŸ¥åç«¯æ˜¯å¦æ­£åœ¨è¿è¡Œ
- ç¡®è®¤ä»£ç†é…ç½®æ˜¯å¦æ­£ç¡®ï¼ˆvue.config.jsï¼‰
- æ£€æŸ¥æµè§ˆå™¨æ§åˆ¶å°çš„ç½‘ç»œè¯·æ±‚

### 3. ç™»å½•å¤±è´¥
- ç¡®è®¤ç”¨æˆ·åå¯†ç æ˜¯å¦æ­£ç¡®
- æ£€æŸ¥åç«¯æ—¥å¿—ä¸­çš„é”™è¯¯ä¿¡æ¯
- ç¡®ä¿JWTå¯†é’¥å·²æ­£ç¡®é…ç½®

### 4. æƒé™é—®é¢˜
- ç¡®è®¤ç”¨æˆ·è§’è‰²æ˜¯å¦æ­£ç¡®
- ç®¡ç†å‘˜å¯ä»¥åœ¨æ•°æ®åº“ä¸­ä¿®æ”¹ç”¨æˆ·è§’è‰²
- æ™®é€šç”¨æˆ·åªèƒ½æ“ä½œè‡ªå·±çš„æ•°æ®

## æŠ€æœ¯æ”¯æŒ

å¦‚é‡åˆ°é—®é¢˜ï¼Œè¯·æ£€æŸ¥ï¼š
1. åç«¯æ—¥å¿—ï¼š`backend/logs/app.log`
2. æµè§ˆå™¨æ§åˆ¶å°é”™è¯¯ä¿¡æ¯
3. ç½‘ç»œè¯·æ±‚çŠ¶æ€ï¼ˆF12å¼€å‘è€…å·¥å…·ï¼‰

## å®‰å…¨å»ºè®®

1. **ç”Ÿäº§ç¯å¢ƒå¿…é¡»ä¿®æ”¹**
   - SECRET_KEY
   - JWT_SECRET_KEY
   - é»˜è®¤ç®¡ç†å‘˜å¯†ç 

2. **å®šæœŸå¤‡ä»½æ•°æ®åº“**
   - SQLiteæ•°æ®åº“æ–‡ä»¶ï¼š`backend/ledger.db`

3. **ä½¿ç”¨HTTPS**
   - ç”Ÿäº§ç¯å¢ƒå»ºè®®é…ç½®SSLè¯ä¹¦

4. **é™åˆ¶CORSæ¥æº**
   - ä¿®æ”¹`CORS_ORIGINS`ä¸ºå…·ä½“åŸŸå

5. **å®šæœŸæ›´æ–°ä¾èµ–**
   - æ£€æŸ¥å®‰å…¨æ›´æ–°å¹¶åŠæ—¶å‡çº§

# å°è´¦ç®¡ç†ç³»ç»Ÿ - é¡¹ç›®æ€»ç»“å’Œä¼˜åŒ–è¯´æ˜

## é¡¹ç›®ä¼˜åŒ–è¦ç‚¹

### 1. åç«¯ä¼˜åŒ–

#### ä»£ç ç»“æ„ä¼˜åŒ–
- **æ¨¡å—åŒ–è®¾è®¡**ï¼šå°†åŸå§‹å•æ–‡ä»¶æ‹†åˆ†ä¸ºå¤šä¸ªæ¨¡å—ï¼ˆmodelsã€authã€apiç­‰ï¼‰
- **é…ç½®ç®¡ç†**ï¼šä½¿ç”¨ç¯å¢ƒå˜é‡å’Œé…ç½®ç±»ç®¡ç†ä¸åŒç¯å¢ƒçš„é…ç½®
- **è“å›¾æ¶æ„**ï¼šä½¿ç”¨Flaskè“å›¾ç»„ç»‡APIè·¯ç”±ï¼Œä¾¿äºæ‰©å±•å’Œç»´æŠ¤

#### å®‰å…¨æ€§å¢å¼º
- **å¯†é’¥ç®¡ç†**ï¼šæ•æ„Ÿä¿¡æ¯é€šè¿‡ç¯å¢ƒå˜é‡é…ç½®ï¼Œä¸ç¡¬ç¼–ç åœ¨ä»£ç ä¸­
- **é”™è¯¯å¤„ç†**ï¼šç»Ÿä¸€çš„é”™è¯¯å¤„ç†æœºåˆ¶ï¼Œé¿å…æ•æ„Ÿä¿¡æ¯æ³„éœ²
- **CORSé…ç½®**ï¼šæ”¯æŒè·¨åŸŸè¯·æ±‚é…ç½®ï¼Œç”Ÿäº§ç¯å¢ƒå¯é™åˆ¶ç‰¹å®šåŸŸå

#### æ€§èƒ½ä¼˜åŒ–
- **æ•°æ®åº“ç´¢å¼•**ï¼šåœ¨å¸¸ç”¨æŸ¥è¯¢å­—æ®µï¼ˆusernameã€provinceã€created_atï¼‰æ·»åŠ ç´¢å¼•
- **åˆ†é¡µæŸ¥è¯¢**ï¼šåˆ—è¡¨æ¥å£æ”¯æŒåˆ†é¡µï¼Œé¿å…ä¸€æ¬¡åŠ è½½è¿‡å¤šæ•°æ®
- **æŸ¥è¯¢ä¼˜åŒ–**ï¼šä½¿ç”¨SQLAlchemyçš„lazy loadingå‡å°‘ä¸å¿…è¦çš„æ•°æ®åŠ è½½

#### åŠŸèƒ½å¢å¼º
- **æ•°æ®éªŒè¯**ï¼šæ·»åŠ è¯·æ±‚æ•°æ®éªŒè¯ï¼Œç¡®ä¿æ•°æ®å®Œæ•´æ€§
- **æ—¥å¿—è®°å½•**ï¼šå®Œå–„çš„æ—¥å¿—ç³»ç»Ÿï¼Œè®°å½•æ“ä½œæ—¥å¿—å’Œé”™è¯¯ä¿¡æ¯
- **æ•°æ®å¯¼å‡º**ï¼šæ”¯æŒCSVæ ¼å¼æ•°æ®å¯¼å‡ºåŠŸèƒ½

### 2. å‰ç«¯ä¼˜åŒ–

#### æ¶æ„ä¼˜åŒ–
- **ç»„ä»¶åŒ–å¼€å‘**ï¼šæ¯ä¸ªåŠŸèƒ½æ¨¡å—ç‹¬ç«‹ç»„ä»¶ï¼Œæé«˜å¤ç”¨æ€§
- **çŠ¶æ€ç®¡ç†**ï¼šä½¿ç”¨Piniaé›†ä¸­ç®¡ç†ç”¨æˆ·çŠ¶æ€
- **è·¯ç”±æ‡’åŠ è½½**ï¼šæŒ‰éœ€åŠ è½½é¡µé¢ç»„ä»¶ï¼Œæé«˜åˆå§‹åŠ è½½é€Ÿåº¦

#### ç”¨æˆ·ä½“éªŒ
- **å“åº”å¼è®¾è®¡**ï¼šé€‚é…ä¸åŒå±å¹•å°ºå¯¸
- **åŠ è½½çŠ¶æ€**ï¼šæ‰€æœ‰å¼‚æ­¥æ“ä½œéƒ½æœ‰loadingæç¤º
- **é”™è¯¯æç¤º**ï¼šå‹å¥½çš„é”™è¯¯æç¤ºä¿¡æ¯
- **è¡¨å•éªŒè¯**ï¼šå‰ç«¯è¡¨å•éªŒè¯ï¼Œå‡å°‘æ— æ•ˆè¯·æ±‚

#### æ€§èƒ½ä¼˜åŒ–
- **è¯·æ±‚æ‹¦æˆª**ï¼šç»Ÿä¸€å¤„ç†è®¤è¯å’Œé”™è¯¯
- **é˜²æŠ–å¤„ç†**ï¼šæœç´¢è¾“å…¥ä½¿ç”¨é˜²æŠ–å‡å°‘è¯·æ±‚æ¬¡æ•°
- **é•¿æ–‡æœ¬å¤„ç†**ï¼šä½¿ç”¨Tooltipå±•ç¤ºé•¿æ–‡æœ¬ï¼Œä¿æŒç•Œé¢æ•´æ´

## å®Œæ•´æ–‡ä»¶æ¸…å•

### åç«¯æ–‡ä»¶ï¼ˆ22ä¸ªï¼‰

```
backend/
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ __init__.py              # åº”ç”¨åˆå§‹åŒ–å’Œé…ç½®
â”‚   â”œâ”€â”€ models.py                # æ•°æ®åº“æ¨¡å‹å®šä¹‰
â”‚   â”œâ”€â”€ auth.py                  # ç”¨æˆ·è®¤è¯æ¨¡å—
â”‚   â”œâ”€â”€ config.py                # é…ç½®æ–‡ä»¶
â”‚   â”œâ”€â”€ api/
â”‚   â”‚   â”œâ”€â”€ __init__.py          # APIåŒ…åˆå§‹åŒ–
â”‚   â”‚   â”œâ”€â”€ ledger.py            # å°è´¦ç›¸å…³API
â”‚   â”‚   â”œâ”€â”€ admin.py             # ç®¡ç†å‘˜API
â”‚   â”‚   â””â”€â”€ meta.py              # å…ƒæ•°æ®APIï¼ˆçœä»½ã€å»ºè®®ç­‰ï¼‰
â”‚   â””â”€â”€ utils/
â”‚       â”œâ”€â”€ __init__.py          # å·¥å…·åŒ…åˆå§‹åŒ–
â”‚       â””â”€â”€ decorators.py        # è£…é¥°å™¨ï¼ˆè§’è‰²æƒé™æ£€æŸ¥ï¼‰
â”œâ”€â”€ scripts/                     # è„šæœ¬ç›®å½•
â”‚   â”œâ”€â”€ backup.bat               # Windowså¤‡ä»½è„šæœ¬
â”‚   â”œâ”€â”€ backup.sh                # Linuxå¤‡ä»½è„šæœ¬
â”‚   â”œâ”€â”€ restore.bat              # Windowsæ¢å¤è„šæœ¬
â”‚   â”œâ”€â”€ restore.sh               # Linuxæ¢å¤è„šæœ¬
â”‚   â”œâ”€â”€ health_check.py          # å¥åº·æ£€æŸ¥è„šæœ¬
â”‚   â”œâ”€â”€ performance_monitor.py   # æ€§èƒ½ç›‘æ§è„šæœ¬
â”‚   â””â”€â”€ alert_config.py          # å‘Šè­¦é…ç½®
â”œâ”€â”€ requirements.txt             # Pythonä¾èµ–åˆ—è¡¨
â”œâ”€â”€ run.py                       # å¼€å‘ç¯å¢ƒå¯åŠ¨è„šæœ¬
â”œâ”€â”€ wsgi.py                      # ç”Ÿäº§ç¯å¢ƒWSGIå…¥å£
â””â”€â”€ .env.example                 # ç¯å¢ƒå˜é‡ç¤ºä¾‹æ–‡ä»¶
```

### å‰ç«¯æ–‡ä»¶ï¼ˆ25ä¸ªï¼‰

```
frontend/
â”œâ”€â”€ public/
â”‚   â”œâ”€â”€ index.html               # HTMLå…¥å£æ–‡ä»¶
â”‚   â””â”€â”€ favicon.ico              # ç½‘ç«™å›¾æ ‡
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ api/                     # APIæ¥å£å°è£…
â”‚   â”‚   â”œâ”€â”€ auth.js              # è®¤è¯ç›¸å…³API
â”‚   â”‚   â”œâ”€â”€ ledger.js            # å°è´¦ç›¸å…³API
â”‚   â”‚   â””â”€â”€ admin.js             # ç®¡ç†å‘˜ç›¸å…³API
â”‚   â”œâ”€â”€ router/
â”‚   â”‚   â””â”€â”€ index.js             # è·¯ç”±é…ç½®
â”‚   â”œâ”€â”€ store/
â”‚   â”‚   â””â”€â”€ user.js              # ç”¨æˆ·çŠ¶æ€ç®¡ç†
â”‚   â”œâ”€â”€ utils/
â”‚   â”‚   â””â”€â”€ request.js           # Axiosè¯·æ±‚å°è£…
â”‚   â”œâ”€â”€ views/                   # é¡µé¢ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ LoginPage.vue        # ç™»å½•é¡µé¢
â”‚   â”‚   â”œâ”€â”€ LedgerList.vue       # å°è´¦åˆ—è¡¨é¡µé¢
â”‚   â”‚   â”œâ”€â”€ LedgerForm.vue       # å°è´¦è¡¨å•é¡µé¢
â”‚   â”‚   â”œâ”€â”€ AdminLogView.vue     # ç®¡ç†å‘˜æ—¥å¿—é¡µé¢
â”‚   â”‚   â””â”€â”€ NotFound.vue         # 404é¡µé¢
â”‚   â”œâ”€â”€ App.vue                  # æ ¹ç»„ä»¶
â”‚   â””â”€â”€ main.js                  # åº”ç”¨å…¥å£
â”œâ”€â”€ .env.development             # å¼€å‘ç¯å¢ƒé…ç½®
â”œâ”€â”€ .env.production              # ç”Ÿäº§ç¯å¢ƒé…ç½®
â”œâ”€â”€ package.json                 # é¡¹ç›®ä¾èµ–é…ç½®
â”œâ”€â”€ package-lock.json            # ä¾èµ–ç‰ˆæœ¬é”å®š
â””â”€â”€ vue.config.js                # Vue CLIé…ç½®
```

### éƒ¨ç½²å’Œæ–‡æ¡£æ–‡ä»¶ï¼ˆ7ä¸ªï¼‰

```
é¡¹ç›®æ ¹ç›®å½•/
â”œâ”€â”€ README.md                    # é¡¹ç›®è¯´æ˜æ–‡æ¡£
â”œâ”€â”€ deployment-guide.md          # éƒ¨ç½²æŒ‡å—
â”œâ”€â”€ install.bat                  # Windowså®‰è£…è„šæœ¬
â”œâ”€â”€ install.sh                   # Linuxå®‰è£…è„šæœ¬
â”œâ”€â”€ start.bat                    # Windowså¯åŠ¨è„šæœ¬
â”œâ”€â”€ start.sh                     # Linuxå¯åŠ¨è„šæœ¬
â””â”€â”€ docker-compose.yml           # Dockerç¼–æ’æ–‡ä»¶
```

**æ€»è®¡æ–‡ä»¶æ•°ï¼š54ä¸ª**

## éƒ¨ç½²æ³¨æ„äº‹é¡¹

### 1. å®‰å…¨é…ç½®

- **å¿…é¡»ä¿®æ”¹çš„é…ç½®**ï¼š
  - `SECRET_KEY`ï¼šFlaskä¼šè¯å¯†é’¥
  - `JWT_SECRET_KEY`ï¼šJWTç­¾åå¯†é’¥
  - `ADMIN_PASSWORD`ï¼šé»˜è®¤ç®¡ç†å‘˜å¯†ç 

- **ç”Ÿäº§ç¯å¢ƒå»ºè®®**ï¼š
  - ä½¿ç”¨HTTPSåè®®
  - é…ç½®é˜²ç«å¢™è§„åˆ™
  - å®šæœŸæ›´æ–°ä¾èµ–åŒ…
  - å¯ç”¨æ—¥å¿—å®¡è®¡

### 2. æ€§èƒ½ä¼˜åŒ–

- **æ•°æ®åº“ä¼˜åŒ–**ï¼š
  - å¤§æ•°æ®é‡æ—¶è¿ç§»åˆ°MySQL/PostgreSQL
  - å®šæœŸæ¸…ç†è¿‡æœŸæ—¥å¿—
  - ä¼˜åŒ–æŸ¥è¯¢ç´¢å¼•

- **ç¼“å­˜ç­–ç•¥**ï¼š
  - é™æ€èµ„æºä½¿ç”¨CDN
  - APIå“åº”ç¼“å­˜
  - ä¼šè¯ç¼“å­˜

### 3. ç›‘æ§è¿ç»´

- **ç›‘æ§æŒ‡æ ‡**ï¼š
  - APIå“åº”æ—¶é—´
  - ç³»ç»Ÿèµ„æºä½¿ç”¨ç‡
  - é”™è¯¯æ—¥å¿—ç»Ÿè®¡
  - ç”¨æˆ·æ´»è·ƒåº¦

- **å¤‡ä»½ç­–ç•¥**ï¼š
  - æ¯æ—¥è‡ªåŠ¨å¤‡ä»½æ•°æ®åº“
  - ä¿ç•™7å¤©æœ¬åœ°å¤‡ä»½
  - é‡è¦æ•°æ®ä¸Šä¼ äº‘å­˜å‚¨

### 4. æ‰©å±•å»ºè®®

- **åŠŸèƒ½æ‰©å±•**ï¼š
  - æ·»åŠ æ•°æ®ç»Ÿè®¡å›¾è¡¨
  - æ”¯æŒæ–‡ä»¶é™„ä»¶ä¸Šä¼ 
  - å¢åŠ å®¡æ‰¹æµç¨‹
  - é›†æˆæ¶ˆæ¯é€šçŸ¥

- **æŠ€æœ¯å‡çº§**ï¼š
  - ä½¿ç”¨Redisç¼“å­˜
  - æ·»åŠ ä»»åŠ¡é˜Ÿåˆ—ï¼ˆCeleryï¼‰
  - å¾®æœåŠ¡æ¶æ„æ”¹é€ 
  - å®¹å™¨åŒ–éƒ¨ç½²

## æµ‹è¯•å»ºè®®

### å•å…ƒæµ‹è¯•

åˆ›å»º `backend/tests/test_auth.py`ï¼š

```python
import pytest
from app import create_app, db
from app.models import User

@pytest.fixture
def client():
    app = create_app('testing')
    with app.test_client() as client:
        with app.app_context():
            db.create_all()
            yield client
            db.drop_all()

def test_user_registration(client):
    response = client.post('/api/register', json={
        'username': 'testuser',
        'password': 'testpass123'
    })
    assert response.status_code == 201
    assert response.json['success'] is True
```

### æ€§èƒ½æµ‹è¯•

ä½¿ç”¨Apache Benchè¿›è¡Œå‹åŠ›æµ‹è¯•ï¼š

```bash
# æµ‹è¯•ç™»å½•æ¥å£
ab -n 1000 -c 10 -p login.json -T application/json http://localhost:5000/api/login

# æµ‹è¯•åˆ—è¡¨æ¥å£
ab -n 1000 -c 10 -H "Authorization: Bearer YOUR_TOKEN" http://localhost:5000/api/ledger
```

## æ€»ç»“

æœ¬é¡¹ç›®é€šè¿‡ä»¥ä¸‹ä¼˜åŒ–å®ç°äº†ä¸€ä¸ªåŠŸèƒ½å®Œå–„ã€ç»“æ„æ¸…æ™°ã€æ˜“äºç»´æŠ¤çš„å°è´¦ç®¡ç†ç³»ç»Ÿï¼š

1. **ä»£ç è´¨é‡**ï¼šæ¨¡å—åŒ–è®¾è®¡ã€ç»Ÿä¸€é”™è¯¯å¤„ç†ã€å®Œå–„çš„æ—¥å¿—ç³»ç»Ÿ
2. **å®‰å…¨æ€§**ï¼šJWTè®¤è¯ã€è§’è‰²æƒé™æ§åˆ¶ã€ç¯å¢ƒå˜é‡é…ç½®
3. **ç”¨æˆ·ä½“éªŒ**ï¼šå“åº”å¼è®¾è®¡ã€å‹å¥½çš„äº¤äº’æç¤ºã€é«˜æ•ˆçš„æ•°æ®å±•ç¤º
4. **å¯ç»´æŠ¤æ€§**ï¼šæ¸…æ™°çš„é¡¹ç›®ç»“æ„ã€è¯¦ç»†çš„æ–‡æ¡£è¯´æ˜ã€è‡ªåŠ¨åŒ–è„šæœ¬
5. **å¯æ‰©å±•æ€§**ï¼šè“å›¾æ¶æ„ã€ç»„ä»¶åŒ–å¼€å‘ã€æ ‡å‡†åŒ–APIè®¾è®¡

ç³»ç»Ÿå·²å…·å¤‡ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²çš„åŸºæœ¬æ¡ä»¶ï¼Œå¯æ ¹æ®å®é™…éœ€æ±‚è¿›è¡ŒåŠŸèƒ½æ‰©å±•å’Œæ€§èƒ½ä¼˜åŒ–ã€‚